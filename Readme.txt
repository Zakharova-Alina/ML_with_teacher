Отчёт интернет-магазина «В один клик» за прошлый период показал, что активность покупателей начала снижаться. Была выбрана стратегия не привлечения новых клиентов, а удержания уже имеющихся. Для этого необходимо выявить клиентов, чья покупательская активность в будущем склонна к снижению и, проанализировав их поведение, сформировать в их адрес персонализированные предложения.

Информация об исходных данных и требуемой по ним предобработке:

*По таблице market_file:*

* Исправили ошибки в значениях 'стандартт' и 'Косметика и аксесуары';

* Маркет_актив_6_мес: Среднее ~ 4.3, min ~ 0.9, max ~ 6.6. Распределение признака похоже на нормальное;

* Маркет_актив_тек_мес: Среднее ~ 4.0, min ~ 3, max ~ 5. Значения признака дискретные;

* Длительность: Среднее ~ 601, min ~ 110, max ~ 1097. Распределение признака "Длительность"не нормальное. Диагрмма размаха не выявила выбросы;

* Акционные_покупки: Среднее ~ 0.3, min ~ 0, max ~ 0.99. Рспределения признака не нормальное. БОльшая часть значений находится в диапазоне от 0.1 до 0.4. И есть небольшой всплеск значения в диапазоне от 0.9 до 1. При этом согласно диаграмме размаха, значения больше 0.5 являются выбросами. Оставили как есть;

* Средний_просмотр_категорий_за_визит: Среднее ~ 1, min ~ 0, max ~ 6. Признак принимает дискретные значения т 1 до 6. Гистограмма отдаленно напоминает нормальное распределение. Диаграмма размаха не выявила выбросов;

* Неоплаченные_продукты_штук_квартал: Среднее ~ 2.8, min ~ 0, max ~ 10. Признак 'Неоплаченные_продукты_штук_квартал' принимает дискретные значения от 0 до 10. Гистограмма похожа на распределние Пирсона. Согласно дигарамме размаха значения признака больше 8 являются выбросом. Оставили как есть;

* Ошибка_сервиса: Среднее ~ 4, min ~ 0, max ~ 9. Значения признака 'Ошибка_сервиса' представляют собой дискретные значения, причем гистограмма похожа на нормальное распределение. Диаграмма размаха не выявила выбросов;

* Страниц_за_визит: Среднее ~ 8, min ~ 1, max ~ 20. Признак "Страниц_за_визит" принимает дискретные значения от 1 до 20. Гистограмма признака похожа на скошенное нормальное распределние. Диаграмма размаха также не выявила аномалий, оставляем данные как есть.

* Покупательская активность сохранилась на прежнем уровне для 62% пользователей, а снизилась для 32%;

* При этом более 2/3 клиентов предпочитают стандартный уровень сервиса, а 29% премиальный;

* 74% согласны получать дополнительные предложение о товаре, не согласны - 26%;

* Самая популярная категория товаров - Товары для детей, на их долю приходится 25%. Следом по популярности идут Домашний текстил (19%) и Косметика и аксессуары (17%).

* Менее популярны Техника для красоты и здоровья (14%), Мелкая бытовая техника и электроника (13%), Кухонная посуда (11%).

*По таблице market_money:*

* Выручка: Среднее ~ 5025, min ~ 0, max ~ 106862. Было принято решение удалить максимальное значение и 6 значений около 0. После удаления выбросов гистограмма признака похоже на нормальное распределение. Диагрмма размаха показывает, что значения признака меньше 3000 и более 6500 являются выбросами. Оставляем, так как такие значения бьются с реальностью;

* Каждое категориальное значение признака "Период" составляет 1/3 от общего числа значений.

*По таблице market_time:*

* Переиминовали столбец с "минут" на "Минут";
* Исправили ошибку в значении "предыдцщий_месяц";
* Минут: Среднее ~ 13, min ~ 4, max ~ 23. Признак принимает дискретные значения от 4 до 23. Распределние признака "Минут" похоже на нормальное. Диагрмма размаха также не вызывает подозрений;

* Текущий и предыдущий месяцы поделили датасет пополам.

*По таблице money:*

* Прибыль: Среднее ~ 4, min ~ 0.86, max ~ 7.43. Распределение признака "Прибыль" похоже на нормальное, диагрмма размаха также не показывает каких-то аномалий.

Далее таблицы market_file.csv, market_money.csv, market_time.csv были объединены в одну для работы с моделью.

Для поиска лучшей модели был написан пайплайн позволяющий перебирать 4 модели наиболее подходящих для решения задач классифкации (логистическая регрезия, k-ближайших соседей, дерево решений, метод опорных векторов) с различными гиперпараметрами для выявления лучшей.

Лучшей моделью оказалась DecisionTreeClassifier. Параметры данной модели: , max_depth=4, max_features=4, random_state=42.

Точность модели оценивали метрикой accuracy. Метрика accuracy предпочтительна, потому что она наиболее универсальна. А в данном исследовании неясно, что для нас хуже, допустить ошибку 1 го рода и предлагать дополнительный специализированный товар пользователю сайта, который и так сохраняет прежний уровень покупательской активности, а значит есть риск снизить его активность за счет навязчивой рекламы. Или же допустить ошибку 2го рода, когда покупательская активность клиента снизилась, а модель решила, что уровень активности остался прежним.

Был отобран сегмент покупателей, удовлетворящих двум условиям:

1. Вероятность снижения их покупательской активности более 0.5;
2. Прибыл, которую они приносят, больше среднего значения среди всех покупателей.

Были подобраны следующие варианты персонализированных предложений:

* подавляющее большинство пользователей используют стандартную подписку. Предполагаем, что премиальная подписка будет создавать условия для повышения покупательской активности, поэтому следует таким клиентам предложить премиальную подписку адресно по сниженной стоимости;
* подавляющее большинство пользователей согласны получать дополнительную информацию о товаре. Предполагаем, что целесообразно предлагать клиенту дополнительные товары с надписью "С этим товаром покупают";
* Наиболее популярной категорией является Мелкая бытовая техника и электроника с большим сроком службы. Вероятно, следует согласившимся на дополнительную рассылку клиентам также предлагать интересеные акционные товары из менее популярных категорий, например, что-то из Кухонной посуды и Техники для красоты и здоровья.